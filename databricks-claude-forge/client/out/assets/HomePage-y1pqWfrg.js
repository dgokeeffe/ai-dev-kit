import{j as e}from"./vendor-markdown-BgprssiS.js";import{c as n,u as B}from"./vendor-react-BKZEzP7s.js";import{c as C,u as D,a as $,T as p,t as d}from"./index-Dskg7ola.js";import{c as z,M as x,L as y,B as m,X as G,P as O,F as w,a as k,f as U,T as V,b as P,G as q}from"./templates-DBGChb8q.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],J=C("chart-column",H);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],X=C("wrench",W),M=n.forwardRef(({className:r,type:l,...o},h)=>e.jsx("input",{type:l,className:z("flex h-10 w-full rounded-lg border border-[var(--color-border)] bg-[var(--color-background)] px-3 py-2 text-sm text-[var(--color-text-primary)] placeholder:text-[var(--color-text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--color-accent-primary)]/50 focus:border-[var(--color-accent-primary)] disabled:cursor-not-allowed disabled:opacity-50 transition-all",r),ref:h,...o}));M.displayName="Input";const Y={MessageSquare:k,BarChart3:J,Wrench:X,GitBranch:q,File:P};function K({template:r,onSelect:l}){const o=Y[r.icon]||P;return e.jsxs("button",{onClick:()=>l(r),className:`flex items-start gap-3 p-4 rounded-lg border-l-4 ${r.color} border border-[var(--color-border)]/50 bg-[var(--color-bg-secondary)] text-left transition-all duration-150 hover:border-[var(--color-border)] hover:shadow-md ${r.id==="blank"?"opacity-70 hover:opacity-100":""}`,children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx(o,{className:"h-5 w-5 text-[var(--color-text-muted)]"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-sm font-medium text-[var(--color-text-heading)]",children:r.name}),e.jsx("p",{className:"mt-0.5 text-xs text-[var(--color-text-muted)] line-clamp-2",children:r.description})]})]})}function re(){const r=B(),{loading:l,error:o,retry:h,branding:u,databaseAvailable:_}=D(),{projects:f,loading:S,error:N,refresh:T,createProject:E,deleteProject:F}=$(),[s,j]=n.useState(null),[i,v]=n.useState(""),[b,g]=n.useState(!1);n.useEffect(()=>{document.title=u.app_title},[u.app_title]);const I=t=>{j(t),v("")},L=async t=>{if(t.preventDefault(),!!i.trim()){g(!0);try{const a=(s==null?void 0:s.id)==="blank"||s==null?void 0:s.id,c=await E(i.trim(),a);v(""),j(null),d.success("Project created"),r(`/projects/${c.id}`)}catch(a){d.error("Failed to create project"),console.error(a)}finally{g(!1)}}},R=async(t,a)=>{if(t.stopPropagation(),!!confirm("Delete this project and all its conversations?"))try{await F(a),d.success("Project deleted")}catch(c){d.error("Failed to delete project"),console.error(c)}};return l||S?e.jsx(x,{children:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(y,{className:"h-8 w-8 animate-spin text-[var(--color-text-muted)]"})})}):o?e.jsx(x,{children:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(p,{className:"mx-auto h-10 w-10 text-[var(--color-error)]"}),e.jsx("h2",{className:"mt-4 text-lg font-semibold text-[var(--color-text-heading)]",children:"Failed to connect"}),e.jsx("p",{className:"mt-2 text-sm text-[var(--color-text-muted)]",children:o.message}),e.jsx(m,{className:"mt-4",onClick:h,children:"Retry"})]})})}):N?e.jsx(x,{children:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(p,{className:"mx-auto h-10 w-10 text-[var(--color-error)]"}),e.jsx("h2",{className:"mt-4 text-lg font-semibold text-[var(--color-text-heading)]",children:"Failed to load projects"}),e.jsx("p",{className:"mt-2 text-sm text-[var(--color-text-muted)]",children:N.message}),e.jsx(m,{className:"mt-4",onClick:T,children:"Retry"})]})})}):e.jsx(x,{children:e.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:e.jsxs("div",{className:"mx-auto max-w-4xl w-full px-4 py-8 flex flex-col flex-1 min-h-0",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-[var(--color-text-heading)]",children:u.app_title}),e.jsx("p",{className:"mt-1 text-sm text-[var(--color-text-muted)]",children:"Build with AI on Databricks"})]}),!_&&e.jsxs("div",{className:"mb-4 flex items-start gap-3 rounded-lg border border-yellow-500/30 bg-yellow-500/10 p-3 text-sm text-yellow-200",children:[e.jsx(p,{className:"h-5 w-5 flex-shrink-0 text-yellow-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Database not connected"}),e.jsx("p",{className:"mt-0.5 text-yellow-200/70",children:"Projects and conversations will not be persisted across restarts."})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-[var(--color-text-heading)] mb-3",children:"New project"}),s?e.jsxs("div",{className:"rounded-xl border border-[var(--color-border)] bg-[var(--color-bg-secondary)] p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxs("span",{className:"text-xs text-[var(--color-text-muted)]",children:["Template: ",s.name]}),e.jsx("button",{onClick:()=>j(null),className:"text-[var(--color-text-muted)] hover:text-[var(--color-text-primary)] transition-colors",children:e.jsx(G,{className:"h-3.5 w-3.5"})})]}),e.jsxs("form",{onSubmit:L,className:"flex gap-3",children:[e.jsx(M,{value:i,onChange:t=>v(t.target.value),placeholder:"Project name...",className:"flex-1",autoFocus:!0}),e.jsx(m,{type:"submit",disabled:!i.trim()||b,children:b?e.jsx(y,{className:"h-4 w-4 animate-spin"}):"Create"})]})]}):e.jsx("div",{className:"grid grid-cols-2 gap-3",children:O.map(t=>e.jsx(K,{template:t,onSelect:I},t.id))})]}),f.length===0?e.jsxs("div",{className:"text-center py-12 text-[var(--color-text-muted)]",children:[e.jsx(w,{className:"mx-auto h-10 w-10 opacity-50"}),e.jsx("p",{className:"mt-3 text-sm",children:"No projects yet. Choose a template above to get started."})]}):e.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0",children:[e.jsx("h3",{className:"text-sm font-medium text-[var(--color-text-heading)] mb-3",children:"Your projects"}),e.jsx("div",{className:"grid gap-3 pb-4",children:f.map(t=>{var a,c;return e.jsxs("div",{onClick:()=>r(`/projects/${t.id}`),className:"group flex cursor-pointer items-center justify-between rounded-xl border border-[var(--color-border)]/50 bg-[var(--color-bg-secondary)] p-4 transition-all duration-200 hover:border-[var(--color-border)] hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-[var(--color-accent-primary)]/10",children:e.jsx(w,{className:"h-6 w-6 text-[var(--color-accent-primary)]"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-[var(--color-text-heading)]",children:t.name}),e.jsxs("div",{className:"mt-1 flex items-center gap-3 text-sm text-[var(--color-text-muted)]",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"h-3.5 w-3.5"}),((a=t.conversations)==null?void 0:a.length)||0," conversation",(((c=t.conversations)==null?void 0:c.length)||0)!==1?"s":""]}),e.jsx("span",{children:U(t.created_at)})]})]})]}),e.jsx(m,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:A=>R(A,t.id),children:e.jsx(V,{className:"h-4 w-4 text-[var(--color-error)]"})})]},t.id)})})]})]})})})}export{re as default};
